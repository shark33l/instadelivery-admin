(this["webpackJsonpinstadelivery-admin"]=this["webpackJsonpinstadelivery-admin"]||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(46),i=a.n(c),s=a(143),o=a(52),l=a(60),d=a(14),u=(a(92),a(32)),j=a(142),b=a(51);b.a.initializeApp({apiKey:"AIzaSyDivYY9wtPwpIP6pdGXTtOZemkRqrlA5uk",authDomain:"order-tracking-faa26.firebaseapp.com",databaseURL:"https://order-tracking-faa26-default-rtdb.firebaseio.com",projectId:"order-tracking-faa26",storageBucket:"order-tracking-faa26.appspot.com",messagingSenderId:"875480724842",appId:"1:875480724842:web:4b2c5b979f4424acf3a113",measurementId:"G-81RRJR905P"}),b.a.analytics();var m=b.a,p=a(16),h=a(4),x=n.a.createContext(),O=function(e){var t=e.children,a=Object(r.useState)(null),n=Object(p.a)(a,2),c=n[0],i=n[1],s=Object(r.useState)(!0),o=Object(p.a)(s,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){m.auth().onAuthStateChanged((function(e){i(e),d(!1)}))}),[]),l?Object(h.jsx)(h.Fragment,{children:"Loading..."}):Object(h.jsx)(x.Provider,{value:{currentUser:c},children:t})},f=(a(97),a.p+"static/media/instabuylogo.7f11e31c.png"),g=function(e){var t=n.a.useContext(x).currentUser;return Object(h.jsxs)(o.a,Object(u.a)(Object(u.a)({tag:"header",direction:"row",align:"center",justify:"between",background:"white",pad:{left:"medium",right:"small",vertical:"small"},elevation:"xsmall",style:{zIndex:"1"}},e),{},{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("img",{src:f,className:"app-logo",alt:"logo"}),Object(h.jsxs)("p",{style:{fontSize:"18px"},children:[Object(h.jsx)("span",{className:"app-title",children:"InstaDelivery"})," Admin Console"]})]}),t&&Object(h.jsx)(j.a,{primary:!0,hoverIndicator:"accent-1",focusIndicator:!1,label:"logout",className:"button-style",onClick:function(){m.auth().signOut()}})]}))},v=a(147),y=a(145),D=a(128),w=a(139),k=a(144),z=a(140),S=a(129),F=a(146),_=a(127),C=a(22),E=a.n(C),I=a(27),A="orders",T=m.firestore().collection(A),N={setTrackingData:function(){var e=Object(I.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.doc(t.invoice).set(t);case 3:e.sent,a(null),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),getAllTrackingData:function(){var e=Object(I.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.orderBy("invoice","desc").get();case 3:return t=e.sent,a=t.docs.map((function(e){return e.data()})),e.abrupt("return",{error:!1,response:a});case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:!0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),searchTrackingData:function(){var e=Object(I.a)(E.a.mark((function e(t){var a,r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.firestore(),e.prev=1,e.next=4,a.collection(A).where("invoice","==",t.trim().toUpperCase()).get();case 4:return r=e.sent,n=r.docs.map((function(e){return e.data()})),e.abrupt("return",{error:!1,response:n});case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:!0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},R=function(e){var t=n.a.useState(0),a=Object(p.a)(t,2),r=a[0],c=a[1],i=n.a.useState({}),s=Object(p.a)(i,2),l=s[0],d=s[1],u=n.a.useState(!1),b=Object(p.a)(u,2),m=b[0],x=b[1],O=n.a.useRef(null);return n.a.useEffect((function(){var t;e.editData&&0!==Object.keys(e.editData).length&&(console.log("why",e.editData),t=e.editData,d(t),c(1))}),[e.editData]),Object(h.jsxs)(h.Fragment,{children:[0!==r&&Object(h.jsx)(o.a,{animation:{type:"slideDown",delay:0,size:"large",duration:500},justify:"center",align:"start",pad:{bottom:"medium"},children:Object(h.jsx)(j.a,{secondary:!0,style:{color:"#1D337C"},icon:Object(h.jsx)(_.a,{color:"brand"}),label:"Add New Entry",reverse:!0,onClick:function(){d({}),c(0),O.current.reset(),e.setEditData&&e.setEditData({})},focusIndicator:!1})}),0===r?Object(h.jsx)(y.a,{level:"4",style:{marginTop:0},children:"Add New Entry"}):Object(h.jsxs)(y.a,{level:"4",children:["Edit Existing Entry : ",Object(h.jsx)("span",{style:{color:"#a1a1a1"},children:e.editData?e.editData.invoice:""})]}),Object(h.jsxs)(D.a,{ref:O,value:l,onChange:function(e){return d(e)},onReset:function(){d(1===r?{invoice:l.invoice}:{})},onSubmit:function(t){!function(t){t.invoice=t.invoice.toUpperCase(),t=function(e){for(var t in e)void 0!==e[t]&&e[t]||delete e[t];return e}(t),x(!0),N.setTrackingData(t,(function(t){t?console.log("Error occured"):(d({}),c(0),O.current.reset(),e.setLoadFirebaseData&&e.setLoadFirebaseData(!e.loadFirebaseData)),x(!1)}))}(t.value)},defaultValue:{invoice:"",name:""},children:[Object(h.jsx)(w.a,{name:"invoice",htmlFor:"invoice-id",label:"Invoice Number",required:!0,children:Object(h.jsx)(k.a,{id:"invoice-id",name:"invoice",disabled:1===r})}),Object(h.jsx)(w.a,{name:"name",htmlFor:"text-input-id",label:"Name",required:!0,children:Object(h.jsx)(k.a,{id:"name-id",name:"name"})}),Object(h.jsx)(w.a,{name:"ordered_date",htmlFor:"ordered_date-id",label:"Ordered Date",required:!0,children:Object(h.jsx)(z.a,{id:"ordered_date-id",name:"ordered_date",format:"mm/dd/yyyy"})}),l.ordered_date&&Object(h.jsx)(w.a,{name:"ready_date",htmlFor:"ready_date-id",label:"Ready Date",children:Object(h.jsx)(z.a,{id:"ready_date-id",name:"ready_date",format:"mm/dd/yyyy"})}),l.ready_date&&Object(h.jsx)(w.a,{name:"shipped_date",htmlFor:"shipped_date-id",label:"Shipped Date",children:Object(h.jsx)(z.a,{id:"shipped_date-id",name:"shipped_date",format:"mm/dd/yyyy"})}),l.shipped_date&&Object(h.jsx)(w.a,{name:"received_date",htmlFor:"received_date-id",label:"Received Date",children:Object(h.jsx)(z.a,{id:"received_date-id",name:"received_date",format:"mm/dd/yyyy"})}),l.received_date&&Object(h.jsx)(w.a,{name:"delivered_date",htmlFor:"delivered_date-id",label:"Delivered Date",children:Object(h.jsx)(z.a,{id:"delivered_date-id",name:"delivered_date",format:"mm/dd/yyyy"})}),m?Object(h.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[Object(h.jsx)(S.a,{}),Object(h.jsx)(F.a,{margin:{horizontal:"medium"},children:"Saving Data..."})]}):Object(h.jsxs)(o.a,{direction:"row",gap:"medium",margin:{vertical:"medium"},children:[Object(h.jsx)(j.a,{type:"submit",primary:!0,label:"Submit",className:"button-style"}),Object(h.jsx)(j.a,{type:"reset",label:"Reset",style:{color:"#1D337C"},className:"button-style"})]})]})]})},L=a(131),P=a(132),U=a(133),q=a(134),J=a(135),M=a(130),B=a(136),Y=["January","February","March","April","May","June","July","August","September","October","November","December"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],V={formatDate:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getDate(),n=Y[t.getMonth()],c=G[t.getDay()];return"".concat(c,", ").concat(r," ").concat(n," ").concat(a)}},W=function(e){var t=n.a.useState([]),a=Object(p.a)(t,2),r=a[0],c=a[1],i=n.a.useState([]),s=Object(p.a)(i,2),l=s[0],d=s[1],u=n.a.useState(!1),b=Object(p.a)(u,2),m=b[0],x=b[1];n.a.useEffect((function(){console.log(e),function(){var e=Object(I.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,N.getAllTrackingData();case 3:(t=e.sent).error?console.log(t.error):(d(t.response),console.log(t.response)),x(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e.loadFirebaseData]);var O=function(){var e=Object(I.a)(E.a.mark((function e(t){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),t){e.next=8;break}return e.next=4,N.getAllTrackingData();case 4:(a=e.sent).error?console.log(a.error):(d(a.response),console.log(a.response)),e.next=12;break;case 8:return e.next=10,N.searchTrackingData(t);case 10:(r=e.sent).error?console.log(r.error):(d(r.response),console.log(r.response));case 12:x(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){for(var t=["delivered_date","received_date","shipped_date","ready_date","ordered_date"],a=["#00873D","#00C781","#FFCA58","#fa9200","#FF4040"],r={},n=0;n<t.length;n++)if(t[n]in e){r={status:t[n].split("_")[0],date:e[t[n]].toLocaleString(),color:a[n]};break}return r||(r={status:"Invalid Status",date:"-"}),r};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(o.a,{fill:!0,children:[Object(h.jsxs)(o.a,{direction:"row",justify:"between",children:[Object(h.jsx)(D.a,{value:r,onChange:function(e){return c(e)},onSubmit:function(e){var t=e.value;O(t.searchTerm)},children:Object(h.jsxs)(o.a,{direction:"row",children:[Object(h.jsx)(w.a,{children:Object(h.jsx)(k.a,{placeholder:"Search by invoice here",name:"searchTerm",icon:Object(h.jsx)(M.a,{})})}),Object(h.jsx)(j.a,{primary:!0,type:"submit",margin:{horizontal:"small",vertical:"xsmall"},label:"Search",className:"button-style"})]})}),m&&Object(h.jsx)(S.a,{size:"medium",align:"end"})]}),Object(h.jsx)(o.a,{margin:{vertical:"large"},children:Object(h.jsxs)(L.a,{children:[Object(h.jsx)(P.a,{children:Object(h.jsxs)(U.a,{style:{background:"#f5f5f5"},children:[Object(h.jsx)(q.a,{scope:"col",border:"bottom",size:"medium",pad:{vertical:"small",horizontal:"small"},children:Object(h.jsx)("strong",{children:"Invoice Number"})}),Object(h.jsx)(q.a,{scope:"col",border:"bottom",size:"large",pad:{vertical:"small",horizontal:"small"},children:"Name"}),Object(h.jsx)(q.a,{scope:"col",border:"bottom",size:"medium",pad:{vertical:"small",horizontal:"small"},children:"Current Status"}),Object(h.jsx)(q.a,{scope:"col",border:"bottom",size:"xlarge",pad:{vertical:"small",horizontal:"small"},children:"Status Date"}),Object(h.jsx)(q.a,{scope:"col",border:"bottom",size:"small",pad:{vertical:"small",horizontal:"small"},align:"center",children:"Action"})]})}),Object(h.jsx)(J.a,{children:l.length?l.map((function(t,a){return Object(h.jsxs)(U.a,{children:[Object(h.jsx)(q.a,{scope:"row",size:"medium",border:"bottom",pad:{vertical:"medium",horizontal:"small"},children:Object(h.jsx)("strong",{children:t.invoice})}),Object(h.jsx)(q.a,{size:"large",border:"bottom",pad:{vertical:"medium",horizontal:"small"},children:t.name}),Object(h.jsx)(q.a,{size:"medium",style:{textTransform:"capitalize"},border:"bottom",pad:{vertical:"medium",horizontal:"small"},children:Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{style:{background:f(t).color,height:"20px",width:"20px",borderRadius:"50%",margin:"-2px 10px 0px 0px"}}),f(t).status]})}),Object(h.jsx)(q.a,{size:"xlarge",border:"bottom",pad:{vertical:"medium",horizontal:"small"},children:V.formatDate(f(t).date)}),Object(h.jsx)(q.a,{size:"small",border:"bottom",pad:{vertical:"medium",horizontal:"small"},children:Object(h.jsx)(o.a,{plain:!0,children:Object(h.jsx)(j.a,{plain:!0,hoverIndicator:!0,icon:Object(h.jsx)(B.a,{}),label:"Edit",onClick:function(){return a=t,void(e.setEditData&&e.setEditData(a));var a}})})})]},t.invoice)})):Object(h.jsx)(U.a,{children:Object(h.jsx)(q.a,{colSpan:"5",align:"center",pad:{vertical:"medium",horizontal:"small"},children:Object(h.jsx)(F.a,{children:"\ud83d\ude1f No Entries Found"})})})})]})})]})})},K=function(e){var t=n.a.useState({}),a=Object(p.a)(t,2),r=a[0],c=a[1],i=n.a.useState(!0),s=Object(p.a)(i,2),l=s[0],d=s[1];return Object(h.jsxs)(v.a,{rows:["large"],columns:["medium","auto"],gap:"xsmall",areas:[{name:"add-panel",start:[0,0],end:[0,0]},{name:"data-panel",start:[1,0],end:[1,0]}],children:[Object(h.jsx)(o.a,{size:"vertical",animation:{type:"slideUp",delay:0,size:"large",duration:500},pad:{vertical:"large",horizontal:"medium"},gridArea:"add-panel",background:"white",children:Object(h.jsx)(R,{editData:r,setEditData:c,loadFirebaseData:l,setLoadFirebaseData:d})}),Object(h.jsx)(o.a,{animation:{type:"slideUp",delay:0,size:"large",duration:500},pad:{top:"large",bottom:"xlarge",horizontal:"medium"},gridArea:"data-panel",background:"white",children:Object(h.jsx)(W,{setEditData:c,loadFirebaseData:l})})]})},X=a(84),Z=function(e){var t=e.component,a=Object(X.a)(e,["component"]),n=Object(r.useContext)(x).currentUser;return Object(h.jsx)(d.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return n?Object(h.jsx)(t,Object(u.a)({},e)):Object(h.jsx)(d.a,{to:"/login"})}}))},H=a(137),Q=a(138),$=Object(d.f)((function(e){var t=e.history,a=Object(r.useState)({error:!1,message:""}),c=Object(p.a)(a,2),i=c[0],s=c[1],l=n.a.useState({}),u=Object(p.a)(l,2),b=u[0],O=u[1],f=Object(r.useCallback)(function(){var e=Object(I.a)(E.a.mark((function e(a){var r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.email,n=a.password,console.log(a),console.log(n),e.prev=4,e.next=7,m.auth().signInWithEmailAndPassword(r,n);case 7:t.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),s({error:!0,message:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(r.useContext)(x).currentUser?Object(h.jsx)(d.a,{to:"/"}):Object(h.jsxs)(o.a,{background:"white",fill:!0,align:"center",justify:"center",pad:"xlarge",children:[Object(h.jsx)(y.a,{level:"2",children:"Login"}),i.error&&Object(h.jsx)(o.a,{direction:"row",align:"center",justify:"center",fill:"horizontal",pad:"medium",children:Object(h.jsx)(H.a,{height:"xsmall",width:"large",background:"#f8d7da",elevation:"xsmall",children:Object(h.jsx)(Q.a,{pad:"medium",align:"center",justify:"center",children:Object(h.jsx)(F.a,{color:"#842029",children:i.message.toString()})})})}),Object(h.jsx)(o.a,{width:"medium",children:Object(h.jsxs)(D.a,{value:b,onSubmit:function(e){var t=e.value;f(t)},onChange:function(e){return O(e)},defaultValue:{email:"",password:""},children:[Object(h.jsx)(w.a,{name:"email",htmlFor:"email-id",label:"Email",required:!0,children:Object(h.jsx)(k.a,{id:"email-id",name:"email",type:"email"})}),Object(h.jsx)(w.a,{name:"password",htmlFor:"password-id",label:"Password",required:!0,children:Object(h.jsx)(k.a,{id:"password-id",name:"password",type:"password"})}),Object(h.jsx)(o.a,{fill:"horizontal",margin:{top:"medium"},height:"medium",children:Object(h.jsx)(j.a,{type:"submit",size:"large",primary:!0,label:"Submit",className:"button-style"})})]})})]})}));var ee=function(){return Object(h.jsx)(s.a,{theme:{global:{colors:{brand:"#1D337C","accent-1":"#06164a",focus:"#06164a"},font:{family:"Poppins",size:"16px",height:"18px"}}},children:Object(h.jsx)(O,{children:Object(h.jsxs)(o.a,{fill:!0,background:"light-2",children:[Object(h.jsx)(g,{}),Object(h.jsxs)(l.a,{children:[Object(h.jsx)(Z,{exact:!0,path:"/",component:K}),Object(h.jsx)(d.b,{exact:!0,path:"/login",component:$})]})]})})})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,148)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(ee,{})}),document.getElementById("root")),te()},92:function(e,t,a){},97:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.98e1ed0d.chunk.js.map